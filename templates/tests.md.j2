# Fabric Test Plan (Auto-Starter)

This file is generated from discovered features. Fill actual results as you execute.

{% for t in data.tenants %}
## Tenant: {{ t.name }}

### Connectivity Tests
- [ ] Ping gateway IPs of each BD subnet (document latency/packet loss)
- [ ] Verify endpoint to endpoint within same EPG (intra-EPG)
- [ ] Verify endpoint across EPG with required Contract(s)

{% if t.l3outs %}
### L3Out Tests
{% for l in t.l3outs %}
- [ ] **{{ l.name }}** (VRF: {{ l.vrf }} | Protocols: {{ l.protocols|join(', ') }})
  - [ ] Verify OSPF/BGP neighbors up (APIC & external device)
  - [ ] Verify advertised external subnets: {{ t.l3outs[loop.index0].external_subnets|map(attribute='ip')|list|join(', ') }}
  - [ ] Trace route from tenant EPG to WAN prefix through L3Out
{% endfor %}
{% endif %}

{% if t.l2outs %}
### L2Out Tests
{% for o in t.l2outs %}
- [ ] **{{ o.name }}** (BD: {{ o.bd }})
  - [ ] Verify VLAN bridging to external switch (MAC moves, ARP resolution)
  - [ ] Test host in external segment reaching EPG in BD {{ o.bd }}
{% endfor %}
{% endif %}

{% if t.service_graphs %}
### Service Graph Tests
{% for g in t.service_graphs %}
- [ ] **Graph {{ g.name }}** nodes:
  - {%- for n in g.nodes %} {{ n.name }}{% if n.funcType %} ({{ n.funcType }}){% endif %}{% if not loop.last %};{% endif %}{% endfor %}
- [ ] Connector flows: {% if g.connections %}{% for c in g.connections %}{{ c.summary }}{% if not loop.last %}, {% endif %}{% endfor %}{% else %}None{% endif %}
  - [ ] Verify redirect policy hits on device (counters/logs)
  - [ ] Exercise Contract Subjects bound to this graph ({% if g.bound_contract_subjects %}{% for b in g.bound_contract_subjects %}{{ b.contract }}{% if b.subject and b.subject != '—' %}→{{ b.subject }}{% endif %}{% if not loop.last %}, {% endif %}{% endfor %}{% else %}None{% endif %})
  - [ ] Verify return traffic symmetry and health probes
{% endfor %}
{% endif %}

---
{% endfor %}
